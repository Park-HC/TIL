# 연산자

## 산술 연산자

| 연산자 | 의미          | 우선순위 |
| ------ | ------------- | -------- |
| ()     | 우선순위 조정 | 1        |
| *      | 곱하기        | 2        |
| /      | 나누기        | 2        |
| +      | 더하기        | 3        |
| -      | 빼기          | 3        |



## 합성 연산자

- 's' || 'Q' = 'sQ'



## 비교 연산자

| 연산자 | 의미        |
| ------ | ----------- |
| =      | 같음        |
| <=     | 작거나 같음 |
| <      | 작음        |
| >      | 큼          |
| >=     | 크거나 같음 |



## 부정 비교 연산자

| 연산자       | 의미                   |
| ------------ | ---------------------- |
| !=           | 같지 않음              |
| ^=           | 같지 않음              |
| <>           | 같지 않음              |
| not 칼럼명 = | 같지 않음              |
| not 칼럼명 > | 크지 않음(작거나 같음) |



## 논리 연산자

| 연산자 | 의미             |
| ------ | ---------------- |
| AND    | 모든 조건이 TRUE |
| OR     | 어느 조건이 TRUE |
| NOT    | TRUE FALSE 반전  |

- 연산 순서: () -> NOT -> AND -> OR



## SQL 연산자

| 연산자             | 의미                           |
| ------------------ | ------------------------------ |
| BETWEEN A AND B    | A와 B의 사이(A와 B 표함)       |
| LIKE '비교 문자열' | 비교 문자열('%문자열%')을 포함 |
| IN (LIST)          | LIST들 중 하나와 일치          |
| IS NULL            | NULL임                         |

- 오직 IS NULL만으로 값이 NULL인지 아닌지 비교 연산할 수 있음



# 함수

## 문자 함수

```sql
CHR(숫자)
# ASCII 코드로 숫자에 대응되는 문자 반환

LOWER(문자열)
# 문자열을 소문자로 변환

UPPER(문자열)
# 문자열을 대문자로 변환

LTRIM(문자열 [, 특정 문자])
RTRIM(문자열 [, 특정 문자])
TRIM([위치] [특정 문자] [FROM] 문자열)
# 각각 문자열 왼쪽, 오른쪽, 선택된 위치에서부터 특정문자를 제거하고 포함되지 않으면 멈춤
# 특정 문자가 없을 경우 왼쪽, 오른쪽, 양쪽의 공백 제거

SUBSTR(문자열, 시작점 [, 길이])
# 문자열을 시작점부터 길이만큼 반환
# 길이를 명시하지 않으면 시작점부터 끝까지
# 문자열의 시작은 1부터!

LENGTH(문자열)
# 문자열 길이 반환

REPLACE(문자열, 변경 전 문자열 [, 변경 후 문자열])
# 문자열에서 변경 전 문자열을 제거[변경 후 문자열로 변경]

CONCAT(문자열1, 문자열2)
# 문자열1과 문자열2를 합침
```



## 숫자 함수

```sql
ABC(수)
# 절대값 반환

SIGN(수)
# 수의 부호 반환(-1, 1, 0 중 하나)

ROUND(수[, 자리수])
# 지정된 소수점 자릿수까지 반올림
# 0이면 자연수 까지 음수면 10<sup>-1</sup>의 계승만큼

TRUNC(수 [, 자릿수])
# 지정된 소수점 자릿수까지 버림

CEIL(수)
# 소수점 이하를 올림
# SQL Server의 경우 CEILNG(문자열)

FLOOR(수)
# 소수점 이하의 수를 버림

MOD(수1, 수2)
# 수1을 수2로 나눈 나머지 반환
# 두번째 인자가 0이면 첫번째 인자가 그대로 반환
# 수1이 양수면 수2가 음수여도 양수가 반환되지만, 수2가 음수면 음수 반환
```



## 날짜 함수

```sql
SYSDATE
# 현재의 연월일시분초 반환
# SQL Server의 경우 GETDATE()

EXTRACT(특정 단위 FROM 날짜 데이터)
# 날짜 데이터에서 특정 단위만을 출력해서 반환
# SQL Server의 경우 DATEPART(특정 단위, 날짜 데이터)

ADD_MONTHS(날짜 데이터, 특정 개월 수)
# 날짜 데이터에 특정 개월 수를 더한 값 반환
# 만약 기준 날짜가 달에 존재하지 않으면, 달의 마지막 날 반환
```



## 변환 함수

- 명시적 형변환: 변환 함수를 사용해 데이터 유형 변환을 명시적으로 나타냄
- 암시적 형변환: 데이터베이스 내부적으로 알아서 데이터 유형 변환
  - 성능 저하나 에러 가능성을 내포하기에 가능한 지양

```sql
TO_NUMBER(문자열)
TO_CHAR(수 혹은 날짜 [, 포맷])
TO_DATE(문자열, 포맷)
```



## NULL 관련 함수

```sql
NVL(인수1, 인수2)
# 인수1이 NULL이면 인수2 반환
# NULL이 아니면 인수1 반환
# SQL Server에서는 ISNULL(인수1, 인수2)

NULLIF(인수1, 인수2)
# 인수1과 인수2가 같으면 NULL 반환
# 같지 않으면 인수1 반환

COALESCE(인수1, 인수2, 인수3, ...)
# 최초로 NULL이 아닌 인수 반환
```

- WHERE 절에 조건절이 쓰이면 암묵적으로 해당 컬럼에 대한 IS NOT NULL 조건이 생성됨
- 그러므로 NULL 컬럼을 포함하고 싶으면 NULL 관련 함수를 사용해 명시적으로 처리해야 함
- 이외에도 NULL에는 많은 제약 조건이 있으니(IN을 못 쓰는 등) NULL관련 함수 이용에 주의해야함



## CASE

- 함수라기 보단 구문에 가까움
- CASE WHEN~ THEN~ELSE~로 ELSE가 없으면 ELSE NULL로 받아들임
- ORACLE의 DECODE 함수와 같은 기능

- DECODE(컬럼, 인자, 반환값, 인자, 반환값, ..., 반환값 [, ELSE 값])



## 집계 함수

- GROUP BY 등으로 집계 대상이 모이면 사용할 수 있음

```sql
COUNT(*)
# 전체 ROW를 COUNT하여 반환

COUNT(컬럼)
# 컬럼 값이 NULL인 ROW를 제외하고 COUNT하여 반환

COUNT(DISTNICT 컬럼)
# 컬럼 값이 NULL이 아닌 ROW 중 중복값을 제외하고 COUNT하여 반환

SUM(컬럼)
# 컬럼값들의 합계를 반환

AVG(컬럼)
# 컬럼값들의 평균을 반환

MAX(컬럼)
# 컬럼값들 중 최고값을 반환

MIN(컬럼)
# 컬럼값들 중 최소값을 반환
```

